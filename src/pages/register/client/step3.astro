---
import Layout from '../../../layouts/Layout.astro';
import Header from '../../../components/Header.astro';
import Footer from '../../../components/Footer.astro';

// Simulación de proveedores encontrados según los criterios
const mockProviders = [
  {
    id: 1,
    name: "TechSolutions Inc.",
    industry: "tech",
    location: "Madrid, España",
    description: "Servicios IT y soluciones tecnológicas para empresas.",
    longDescription: "TechSolutions Inc. ofrece soluciones tecnológicas integrales para empresas de todos los tamaños. Con más de 10 años de experiencia en el sector, nos especializamos en desarrollo de software, consultoría IT, ciberseguridad y servicios en la nube.",
    rating: 4.8,
    reviews: 124,
    verified: true,
    contact: {
      phone: "+34 912 456 789",
      email: "contacto@techsolutions.com",
      website: "https://www.techsolutions-inc.com"
    },
    services: ["Desarrollo de software", "Consultoría IT", "Ciberseguridad", "Cloud Computing"],
    clients: ["Banco Nacional", "Grupo Empresarial MTZ", "Seguros Universales", "Tech Innovations"]
  },
  {
    id: 2,
    name: "Global Logistics",
    industry: "transport",
    location: "Barcelona, España",
    description: "Servicios de logística y transporte internacional.",
    longDescription: "Global Logistics es una empresa líder en soluciones logísticas internacionales. Ofrecemos servicios de transporte terrestre, marítimo y aéreo, así como almacenamiento y distribución de mercancías. Nuestra red global garantiza entregas eficientes y seguras.",
    rating: 4.5,
    reviews: 89,
    verified: true,
    contact: {
      phone: "+34 932 789 456",
      email: "info@globallogistics.com",
      website: "https://www.globallogistics-transport.com"
    },
    services: ["Transporte internacional", "Almacenamiento", "Distribución", "Gestión aduanera"],
    clients: ["Productos Ecológicos SA", "Textiles Europeos", "Grupo Comercial FCB", "Importaciones del Este"]
  },
  {
    id: 3,
    name: "Constructora Moderna",
    industry: "construction",
    location: "Valencia, España", 
    description: "Servicios de construcción y reforma para proyectos comerciales.",
    longDescription: "Constructora Moderna ofrece servicios integrales de construcción y reforma para proyectos comerciales e industriales. Con un enfoque en la sostenibilidad y la eficiencia, desarrollamos proyectos arquitectónicos adaptados a las necesidades específicas de cada cliente.",
    rating: 4.7,
    reviews: 56,
    verified: true,
    contact: {
      phone: "+34 962 333 444",
      email: "proyectos@constructoramoderna.es",
      website: "https://www.constructoramoderna.es"
    },
    services: ["Construcción comercial", "Reformas industriales", "Consultoría arquitectónica", "Proyectos de sostenibilidad"],
    clients: ["Centros Comerciales Reunidos", "Industrias Valencia", "Grupo Hotelero Sun", "Oficinas Centrales BLM"]
  },
  {
    name: "HealthTech Solutions",
    industry: "health",
    location: "Londres, Reino Unido",
    description: "Equipamiento médico y soluciones para el sector sanitario.",
    rating: 4.9,
    reviews: 72,
    verified: true
  },
  {
    name: "Green Energy Co.",
    industry: "energy",
    location: "Berlín, Alemania",
    description: "Soluciones de energía renovable y consultoría energética.",
    rating: 4.6,
    reviews: 48,
    verified: false
  },
  {
    name: "Digital Marketing Group",
    industry: "tech",
    location: "Sevilla, España",
    description: "Servicios de marketing digital y posicionamiento web.",
    rating: 4.3,
    reviews: 35,
    verified: true
  },
  {
    name: "Industrial Supplies Co.",
    industry: "manufacturing",
    location: "Milán, Italia",
    description: "Suministros industriales y materias primas para fabricación.",
    rating: 4.4,
    reviews: 67,
    verified: true
  }
];
---

<Layout title="Resultados de búsqueda | Registro Cliente B2B Connect">
  <Header />
  
  <main class="pt-32 pb-20 bg-white">
    <div class="container mx-auto px-4">
      <div class="max-w-5xl mx-auto">
        <!-- Indicador de progreso -->
        <div class="mb-12">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <div class="w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">
                ✓
              </div>
              <div class="ml-3 text-blue-600 font-semibold">Rubros</div>
            </div>
            <div class="flex-grow mx-4 h-1 bg-blue-600"></div>
            <div class="flex items-center">
              <div class="w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">
                ✓
              </div>
              <div class="ml-3 text-blue-600 font-semibold">Alcance</div>
            </div>
            <div class="flex-grow mx-4 h-1 bg-blue-600"></div>
            <div class="flex items-center">
              <div class="w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold">
                3
              </div>
              <div class="ml-3 text-blue-600 font-semibold">Resultados</div>
            </div>
          </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-md p-6 md:p-8 mb-10 border border-gray-100">
          <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-8 gap-4">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-900">
              ¡Hemos encontrado {mockProviders.length} proveedores para tu negocio!
            </h1>
            <div class="flex items-center text-blue-600 whitespace-nowrap">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
              </svg>
              <span class="text-sm font-medium">Filtros aplicados</span>
            </div>
          </div>
          
          <!-- Lista de proveedores (con blur) -->
          <div id="results-container" class="space-y-4 relative">
            <div class="blur-sm pointer-events-none">
              {mockProviders.map(provider => (
                <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                  <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                    <div class="flex-1">
                      <div class="flex flex-wrap items-center gap-2 mb-1">
                        <h3 class="text-lg font-semibold text-gray-900">{provider.name}</h3>
                        {provider.verified && (
                          <span class="bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                            Verificado
                          </span>
                        )}
                      </div>
                      <p class="text-gray-600 text-sm mb-2">{provider.description}</p>
                      <div class="flex flex-wrap items-center gap-4 text-sm text-gray-500">
                        <span class="flex items-center">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                          </svg>
                          {provider.location}
                        </span>
                        <span class="flex items-center">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-yellow-500" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                          </svg>
                          {provider.rating} ({provider.reviews} reseñas)
                        </span>
                      </div>
                    </div>
                    <div class="flex justify-end">
                      <button 
                        class="view-details-button px-4 py-2 bg-blue-600 text-white font-medium rounded-lg transition-colors hover:bg-blue-700 whitespace-nowrap"
                        data-provider-id={provider.id}
                      >
                        Ver detalles
                      </button>
                    </div>
                  </div>
                </div>
              ))}
            </div>
            
            <!-- Overlay de desbloqueo -->
            <div id="paywall-overlay" class="absolute inset-0 flex flex-col items-center justify-center bg-white bg-opacity-90 rounded-lg p-4">
              <div class="text-center max-w-md px-4">
                <div class="w-20 h-20 mx-auto mb-6 text-blue-600">
                  <svg xmlns="http://www.w3.org/2000/svg" class="w-full h-full" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                  </svg>
                </div>
                <h3 class="text-2xl font-bold text-gray-900 mb-3">Desbloquea los resultados completos</h3>
                <p class="text-gray-600 mb-6">
                  Has encontrado 7 proveedores que coinciden con tus necesidades. Desbloquea todos los resultados, detalles de contacto y reseñas con nuestro plan básico.
                </p>
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6 shadow-sm">
                  <h4 class="text-xl font-semibold text-gray-900 mb-2">Plan Básico</h4>
                  <div class="text-3xl font-bold text-blue-700 mb-4">$9 <span class="text-sm font-normal text-gray-600">/ único pago</span></div>
                  <ul class="text-left space-y-2 mb-6">
                    <li class="flex items-start">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-500 flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                      </svg>
                      <span>Acceso a todos los resultados de esta búsqueda</span>
                    </li>
                    <li class="flex items-start">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-500 flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                      </svg>
                      <span>Información detallada de los proveedores</span>
                    </li>
                    <li class="flex items-start">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-green-500 flex-shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                      </svg>
                      <span>Contacto directo con proveedores seleccionados</span>
                    </li>
                  </ul>
                  <button id="unlock-button" class="w-full px-6 py-3 bg-blue-600 text-white font-medium rounded-lg transition-colors hover:bg-blue-700 shadow-sm">
                    Desbloquear por $9
                  </button>
                </div>
                <div class="flex items-center justify-center text-xs text-gray-500">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                  </svg>
                  <span>Pago 100% seguro. Si no encuentras lo que buscas, te devolvemos tu dinero.</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="text-center mt-12">
          <div class="flex justify-center gap-4">
            <a href="/register/client/step2" class="px-6 py-3 border border-blue-600 text-blue-600 font-medium rounded-lg transition-colors hover:bg-blue-50">
              Volver a la búsqueda
            </a>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <!-- Modal de detalles del proveedor -->
  <div id="provider-modal" class="fixed inset-0 z-50" style="display: none; background-color: rgba(0,0,0,0.4);">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-xl">
        <div class="sticky top-0 bg-white p-4 border-b border-gray-200 flex justify-between items-center">
          <h2 class="text-2xl font-bold text-gray-900" id="modal-title">Detalles del proveedor</h2>
          <button id="close-modal" class="text-gray-500 hover:text-gray-700 transition-colors p-1 rounded-full hover:bg-gray-100">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div class="p-6" id="modal-content">
          <!-- El contenido se cargará dinámicamente -->
        </div>
      </div>
    </div>
  </div>
  
  <Footer />
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Verificar que el usuario viene del formulario de registro
    const clientData = sessionStorage.getItem('clientData');
    if (!clientData) {
      // Si no tiene datos de registro, redirigir al formulario
      window.location.href = '/register/client/form';
      return;
    }
    
    // Verificar que venimos del paso anterior
    if (!sessionStorage.getItem('selectedIndustries') || !sessionStorage.getItem('selectedScope')) {
      window.location.href = '/register/client/step1';
      return;
    }
    
    const unlockButton = document.getElementById('unlock-button');
    const resultsContainer = document.getElementById('results-container');
    const paywallOverlay = document.getElementById('paywall-overlay');
    
    // Datos de proveedores para cargar en el modal
    const providers = [
      {
        id: 1,
        name: "TechSolutions Inc.",
        industry: "tech",
        location: "Madrid, España",
        description: "Servicios IT y soluciones tecnológicas para empresas.",
        longDescription: "TechSolutions Inc. ofrece soluciones tecnológicas integrales para empresas de todos los tamaños. Con más de 10 años de experiencia en el sector, nos especializamos en desarrollo de software, consultoría IT, ciberseguridad y servicios en la nube.",
        rating: 4.8,
        reviews: 124,
        verified: true,
        contact: {
          phone: "+34 912 456 789",
          email: "contacto@techsolutions.com",
          website: "https://www.techsolutions-inc.com"
        },
        services: ["Desarrollo de software", "Consultoría IT", "Ciberseguridad", "Cloud Computing"],
        clients: ["Banco Nacional", "Grupo Empresarial MTZ", "Seguros Universales", "Tech Innovations"]
      },
      {
        id: 2,
        name: "Global Logistics",
        industry: "transport",
        location: "Barcelona, España",
        description: "Servicios de logística y transporte internacional.",
        longDescription: "Global Logistics es una empresa líder en soluciones logísticas internacionales. Ofrecemos servicios de transporte terrestre, marítimo y aéreo, así como almacenamiento y distribución de mercancías. Nuestra red global garantiza entregas eficientes y seguras.",
        rating: 4.5,
        reviews: 89,
        verified: true,
        contact: {
          phone: "+34 932 789 456",
          email: "info@globallogistics.com",
          website: "https://www.globallogistics-transport.com"
        },
        services: ["Transporte internacional", "Almacenamiento", "Distribución", "Gestión aduanera"],
        clients: ["Productos Ecológicos SA", "Textiles Europeos", "Grupo Comercial FCB", "Importaciones del Este"]
      },
      {
        id: 3,
        name: "Constructora Moderna",
        industry: "construction",
        location: "Valencia, España", 
        description: "Servicios de construcción y reforma para proyectos comerciales.",
        longDescription: "Constructora Moderna ofrece servicios integrales de construcción y reforma para proyectos comerciales e industriales. Con un enfoque en la sostenibilidad y la eficiencia, desarrollamos proyectos arquitectónicos adaptados a las necesidades específicas de cada cliente.",
        rating: 4.7,
        reviews: 56,
        verified: true,
        contact: {
          phone: "+34 962 333 444",
          email: "proyectos@constructoramoderna.es",
          website: "https://www.constructoramoderna.es"
        },
        services: ["Construcción comercial", "Reformas industriales", "Consultoría arquitectónica", "Proyectos de sostenibilidad"],
        clients: ["Centros Comerciales Reunidos", "Industrias Valencia", "Grupo Hotelero Sun", "Oficinas Centrales BLM"]
      },
      // Datos para los otros proveedores serían similares
    ];
    
    unlockButton.addEventListener('click', () => {
      // Simular proceso de pago
      unlockButton.disabled = true;
      unlockButton.innerHTML = '<span class="inline-block animate-spin mr-2">⏳</span> Procesando...';
      
      setTimeout(() => {
        // Eliminar el paywall y desbloquear los resultados
        if (paywallOverlay) {
          paywallOverlay.classList.add('fade-out');
          setTimeout(() => {
            paywallOverlay.remove();
            const blurredContent = document.querySelector('.blur-sm');
            if (blurredContent) {
              blurredContent.classList.remove('blur-sm', 'pointer-events-none');
              
              // Añadir event listeners a los botones de "Ver detalles"
              setupDetailButtons();
            }
          }, 300);
        }
        
        // Almacenar que el usuario ha pagado
        sessionStorage.setItem('resultsPaid', 'true');
        
        // Mostrar un mensaje de éxito
        const successMessage = document.createElement('div');
        successMessage.className = 'fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50';
        successMessage.innerHTML = `
          <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span>¡Pago exitoso! Resultados desbloqueados.</span>
          </div>
        `;
        document.body.appendChild(successMessage);
        
        // Eliminar el mensaje después de unos segundos
        setTimeout(() => {
          successMessage.classList.add('fade-out');
          setTimeout(() => successMessage.remove(), 300);
        }, 3000);
      }, 1500);
    });
    
    // Configurar botones de "Ver detalles" después de desbloquear
    function setupDetailButtons() {
      const detailButtons = document.querySelectorAll('.view-details-button');
      const modal = document.getElementById('provider-modal');
      const closeModalButton = document.getElementById('close-modal');
      const modalTitle = document.getElementById('modal-title');
      const modalContent = document.getElementById('modal-content');
      
      detailButtons.forEach(button => {
        button.addEventListener('click', () => {
          const providerId = parseInt(button.dataset.providerId);
          const provider = providers.find(p => p.id === providerId);
          
          if (provider) {
            // Llenar el modal con los datos del proveedor
            modalTitle.textContent = provider.name;
            modalContent.innerHTML = generateProviderDetails(provider);
            
            // Mostrar el modal
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden'; // Prevenir scroll
          }
        });
      });
      
      // Cerrar el modal
      closeModalButton.addEventListener('click', () => {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto'; // Restaurar scroll
      });
      
      // Cerrar al hacer click fuera del contenido
      modal.addEventListener('click', (e) => {
        if (e.target === modal || e.target.closest('.min-h-screen') === e.target) {
          modal.style.display = 'none';
          document.body.style.overflow = 'auto'; // Restaurar scroll
        }
      });
      
      // Cerrar con tecla ESC
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.style.display === 'block') {
          modal.style.display = 'none';
          document.body.style.overflow = 'auto'; // Restaurar scroll
        }
      });
    }
    
    // Generar HTML para los detalles del proveedor
    function generateProviderDetails(provider) {
      return `
        <div class="space-y-6">
          <div class="flex items-center justify-between">
            <div>
              <div class="flex items-center gap-2">
                ${provider.verified ? `
                <span class="bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                  </svg>
                  Verificado
                </span>` : ''}
                <span class="text-sm text-gray-500">${provider.industry === 'tech' ? 'Tecnología' : 
                       provider.industry === 'transport' ? 'Transporte' : 
                       provider.industry === 'construction' ? 'Construcción' : 'Otro'}</span>
              </div>
              <div class="flex items-center mt-1 text-yellow-500">
                ${'★'.repeat(Math.floor(provider.rating))}${provider.rating % 1 >= 0.5 ? '½' : ''}${'☆'.repeat(5 - Math.ceil(provider.rating))}
                <span class="ml-2 text-sm text-gray-600">${provider.rating} (${provider.reviews} reseñas)</span>
              </div>
            </div>
            <div class="text-right">
              <button class="px-4 py-2 bg-green-600 text-white font-medium rounded-lg transition-colors hover:bg-green-700 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                </svg>
                Contactar
              </button>
            </div>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Ubicación</h3>
            <div class="flex items-center text-gray-700">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
              ${provider.location}
            </div>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Descripción</h3>
            <p class="text-gray-700">${provider.longDescription}</p>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Servicios</h3>
            <div class="flex flex-wrap gap-2">
              ${provider.services.map(service => `
                <span class="bg-blue-100 text-blue-800 text-sm px-3 py-1 rounded-full">${service}</span>
              `).join('')}
            </div>
          </div>
          
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Clientes destacados</h3>
            <ul class="list-disc list-inside space-y-1 text-gray-700">
              ${provider.clients.map(client => `<li>${client}</li>`).join('')}
            </ul>
          </div>
          
          <div class="border-t border-gray-200 pt-4 mt-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Información de contacto</h3>
            <div class="space-y-2">
              <div class="flex items-center text-gray-700">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                </svg>
                ${provider.contact.phone}
              </div>
              <div class="flex items-center text-gray-700">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
                <a href="mailto:${provider.contact.email}" class="text-blue-600 hover:underline">${provider.contact.email}</a>
              </div>
              <div class="flex items-center text-gray-700">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9" />
                </svg>
                <a href="${provider.contact.website}" target="_blank" class="text-blue-600 hover:underline">${provider.contact.website.replace('https://', '')}</a>
              </div>
            </div>
          </div>
          
          <div class="flex justify-between pt-4 border-t border-gray-200">
            <button class="px-4 py-2 border border-blue-600 text-blue-600 font-medium rounded-lg transition-colors hover:bg-blue-50">
              Solicitar presupuesto
            </button>
            <button class="px-4 py-2 bg-blue-600 text-white font-medium rounded-lg transition-colors hover:bg-blue-700">
              Guardar proveedor
            </button>
          </div>
        </div>
      `;
    }
    
    // Verificar si el usuario ya pagó (por ejemplo, si recarga la página)
    if (sessionStorage.getItem('resultsPaid') === 'true') {
      if (paywallOverlay) {
        paywallOverlay.remove();
        document.querySelector('.blur-sm')?.classList.remove('blur-sm', 'pointer-events-none');
        setupDetailButtons();
      }
    }
  });
</script>

<style>
  .fade-out {
    animation: fadeOut 0.3s forwards;
  }
  
  @keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
  }
</style>
